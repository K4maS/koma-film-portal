"use strict";(self.webpackChunkkoma_film_portal=self.webpackChunkkoma_film_portal||[]).push([[225],{423:(e,t,s)=>{s.d(t,{Q:()=>r});s(43);var l=s(86),n=s(795);const a="errorBlock_block__NXWXp";var i=s(825),o=s(579);const r=e=>{let{text:t}=e;return(0,o.jsx)(l.A,{className:a,title:t,children:(0,o.jsxs)(n.u,{onClick:()=>{window.location.reload()},children:[(0,o.jsx)(i.AI0,{})," \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"]})})}},346:(e,t,s)=>{s.d(t,{s:()=>k});var l=s(216),n=s(475),a=s(795);const i={item:"filmItem_item__rz2TU",link:"filmItem_link__MZKoo",block:"filmItem_block__2pmLQ",imgBlock:"filmItem_imgBlock__Vltyn",poster:"filmItem_poster__C6+K4",title:"filmItem_title__F1Xhv",logo:"filmItem_logo__erZw4",buttons:"filmItem_buttons__c6Ibz"};var o=s(462),r=s(972),c=s(354),u=s(689),m=s(43),d=s(593),p=s(579);const _=e=>{var t,s;let{data:_}=e;const v=(0,c.j)(),[h,g]=(0,m.useState)(!1),f=(0,c.G)((e=>e.users.currentUserId)),x=(0,c.G)((e=>e.users.usersList)),k=(0,l.Zp)(),j=(0,c.G)((e=>{if(null!==f){var t;const s=(0,d.R)(x,f);return null===(t=e.users.usersList[s])||void 0===t?void 0:t.likedFilmsId}}));return(0,m.useEffect)((()=>{j&&(j.includes(_.kinopoiskId)?g(!0):g(!1))}),[j]),(0,p.jsx)("li",{className:i.item,children:(0,p.jsxs)(n.N_,{className:i.link,to:"".concat(r.G.card,"/").concat(_.kinopoiskId),children:[(0,p.jsx)("div",{className:i.imgBlock,children:(0,p.jsx)("img",{className:i.poster,src:_.posterUrlPreview,alt:_.nameRu?_.nameRu:_.nameEn?_.nameEn:_.nameOriginal})}),(0,p.jsxs)("div",{className:i.block,children:[(0,p.jsx)("h2",{className:i.title,children:_.nameRu?_.nameRu:_.nameEn?_.nameEn:_.nameOriginal}),(0,p.jsxs)("p",{className:i.year,children:[_.nameEn?_.nameEn+",":""," ",_.year]}),(0,p.jsxs)("p",{className:i.rated,children:[null===(t=_.countries[0])||void 0===t?void 0:t.country," \u2022 ",null===(s=_.genres[0])||void 0===s?void 0:s.genre]})]}),(0,p.jsxs)("div",{className:i.buttons,children:[(0,p.jsx)(a.u,{className:i.btn,children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),h?(0,p.jsxs)(a.u,{className:i.btnLike,onClick:e=>{e.preventDefault(),e.stopPropagation(),v((0,u.G8)({id:_.kinopoiskId}))},active:!0,children:[(0,p.jsx)(o.FTR,{})," \u0414\u0438\u0437\u043b\u0430\u0439\u043a"]}):(0,p.jsxs)(a.u,{className:i.btnLike,onClick:e=>{e.preventDefault(),e.stopPropagation(),null!==f?v((0,u.vW)({film:_})):k(r.G.login)},children:[(0,p.jsx)(o.C1M,{})," \u041b\u0430\u0439\u043a"]})]})]})})},v={list:"filmsList_list__-1joh",pagination:"filmsList_pagination__YmDOS"};var h=s(339);const g="paginationBtn_paginatinBtn__YZR90",f="paginationBtn_active__qUqRN",x=e=>{let{index:t,active:s,onClick:l}=e;const[n,a]=(0,m.useState)("");return(0,m.useEffect)((()=>{a(s?f:"")}),[s]),(0,p.jsx)("button",{onClick:l,className:(0,h.A)(g,n),children:t})},k=e=>{let{data:t,pages:s,page:l,onChangePage:n}=e;return(0,p.jsxs)("div",{children:[(0,p.jsx)("ul",{className:v.list,children:t&&t.map((e=>(0,p.jsx)(_,{data:e},e.kinopoiskId)))}),s&&s>1&&(0,p.jsx)("ul",{className:v.pagination,children:s&&Array.from({length:s}).map(((e,t)=>{const s=t+1;return(0,p.jsx)("li",{className:v.paginationItem,children:(0,p.jsx)(x,{onClick:()=>n(t),index:s,active:s===l})},t)}))})]})}},86:(e,t,s)=>{s.d(t,{A:()=>i});s(43);const l={block:"messageBlock_block__fJS03",title:"messageBlock_title__+I7PB"};var n=s(339),a=s(579);function i(e){let{title:t,children:s}=e;return(0,a.jsxs)("div",{className:(0,n.A)(l.block,"container"),children:[(0,a.jsx)("h1",{className:l.title,children:t}),(0,a.jsx)("div",{children:s})]})}},920:(e,t,s)=>{s.d(t,{p:()=>u});var l=s(43),n=s(339);const a="input_inputBlock__PXsw2",i="input_input__Dogvo",o="input_eyeBtn__mUpdd";var r=s(156),c=s(579);const u=e=>{let{onClick:t,onInput:s,onChange:u,className:m,inputType:d,...p}=e;const[_,v]=(0,l.useState)(d);return(0,c.jsxs)("div",{className:a,children:[(0,c.jsx)("input",{className:(0,n.A)(i,m),onClick:t,onInput:s,onChange:u,type:_,...p}),"password"===d&&(0,c.jsx)("button",{type:"button",onClick:e=>{(e=>{e.preventDefault(),v("password"===_?"text":"password")})(e)},className:o,children:"password"===_?(0,c.jsx)(r.$_Y,{}):(0,c.jsx)(r.QJN,{})})]})}},225:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var l=s(43),n=s(423),a=s(346),i=s(354),o=s(689);const r={filter:"filterBlock_filter__fRf0F",filterBlock:"filterBlock_filterBlock__5bRFW",searchInput:"filterBlock_searchInput__BsvkZ",showFilterBtn:"filterBlock_showFilterBtn__8KQjz"};var c=s(920),u=s(339);const m="select_select__au-a2";var d=s(579);const p=e=>{let{onClick:t,onChange:s,className:l,options:n,...a}=e;return(0,d.jsx)("select",{className:(0,u.A)(m,l),onClick:t,onChange:s,...a,children:n.map((e=>(0,d.jsx)("option",{value:e.value,children:e.name},e.value)))})};var _=s(649);var v=s(795);const h=()=>{var e,t,s,n,a,m,h;const g=(0,i.j)(),f=(0,i.G)((e=>e.users.filmsFilter)),[x,k]=(0,l.useState)(!1),[j,N]=(0,l.useState)(o.hr),[I,C]=(0,l.useState)(o.hr),y=function(e,t){const[s,n]=(0,l.useState)(e);return(0,l.useEffect)((()=>{const s=setTimeout((()=>{n(e)}),t);return()=>{clearTimeout(s)}}),[e,t]),s}(j,500),b=(e,t)=>{if(null===e||""===e.target.value)N((e=>({...e,[t]:void 0})));else{const s=e.target.value;N((e=>({...e,[t]:s})))}},B=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;const n=e.target.value,a=Number(n);/^\d*$/.test(n)?isNaN(a)||a>l||a<s||n.toLowerCase().includes("e")?e.preventDefault():b(e,t):e.preventDefault()},E=(e,t)=>{const s=e.target.value;(["RATING","NUM_VOTE","YEAR"].includes(s)||["ALL","FILM","TV_SHOW","TV_SERIES","MINI_SERIES"].includes(s))&&N((e=>({...e,[t]:s})))};return(0,l.useEffect)((()=>{JSON.stringify(y)!==JSON.stringify(I)&&(g((0,o.oB)(j)),C(j))}),[y]),(0,l.useEffect)((()=>N(f)),[]),(0,d.jsxs)("div",{className:r.filter,children:[(0,d.jsxs)("div",{className:r.filterBlock,children:[(0,d.jsx)(c.p,{type:"search",value:null!==(e=j.keyword)&&void 0!==e?e:"",placeholder:"\u041f\u043e\u0438\u0441\u043a",className:r.searchInput,onChange:e=>{b(e,"keyword")}}),x&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p,{options:[{name:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0437\u044b\u0432\u043e\u0432",value:"NUM_VOTE"},{name:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",value:"RATING"},{name:"\u0413\u043e\u0434",value:"YEAR"}],value:null!==(t=j.order)&&void 0!==t?t:"",onChange:e=>{E(e,"order")}}),(0,d.jsx)(p,{value:null!==(s=j.type)&&void 0!==s?s:"",options:[{name:"\u0412\u0441\u0435",value:"ALL"},{name:"\u0424\u0438\u043b\u044c\u043c\u044b",value:"FILM"},{name:"\u041c\u0438\u043d\u0438 \u0441\u0435\u0440\u0438\u0430\u043b\u044b",value:"MINI_SERIES"},{name:"\u0422\u0435\u043b\u0435-\u0441\u0435\u0440\u0438\u0430\u043b\u044b",value:"TV_SERIES"},{name:"\u0422\u0435\u043b\u0435-\u0448\u043e\u0443",value:"TV_SHOW"}],onChange:e=>{E(e,"type")}}),(0,d.jsx)(c.p,{type:"text",value:null!==(n=j.ratingFrom)&&void 0!==n?n:"",className:r.filterInput,placeholder:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043e\u0442 (0 - 10)",onChange:e=>{console.log(e.target.value.toLowerCase().includes("e")),B(e,"ratingFrom",0,10)}}),(0,d.jsx)(c.p,{type:"text",value:null!==(a=j.ratingTo)&&void 0!==a?a:"",className:r.filterInput,placeholder:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0434\u043e (0 - 10)",onChange:e=>{B(e,"ratingTo",0,10)}}),(0,d.jsx)(c.p,{type:"text",value:null!==(m=j.yearFrom)&&void 0!==m?m:"",className:r.filterInput,placeholder:"\u0413\u043e\u0434 \u043e\u0442",onChange:e=>{B(e,"yearFrom",0,2999,!0)}}),(0,d.jsx)(c.p,{type:"text",value:null!==(h=j.yearTo)&&void 0!==h?h:"",className:r.filterInput,placeholder:"\u0413\u043e\u0434 \u0434\u043e",onChange:e=>{B(e,"yearTo",0,2999,!0)}}),(0,d.jsx)(_.$,{disabled:JSON.stringify(f)===JSON.stringify(o.hr),title:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",onClick:()=>{N(o.hr),g((0,o.oB)(o.hr))}})]})]}),(0,d.jsx)(v.u,{className:(0,u.A)(r.showFilterBtn,x?r.filterActive:""),onClick:()=>{k((e=>!e))},children:x?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440"})]})};var g=s(566),f=s(86),x=s(796);const k={block:"allFilms_block__cW8X4"};function j(){const e=(0,i.G)((e=>e.users.filmsFilter)),{data:t,isLoading:s,error:l}=(0,x.st)(e),r=(0,i.j)(),c=(0,i.G)((e=>e.users.filmsFilter.page));return(0,d.jsx)("div",{children:(0,d.jsx)("div",{className:"container",children:(0,d.jsxs)("div",{className:k.block,children:[(0,d.jsx)(h,{}),l?(0,d.jsx)(n.Q,{text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}):s?(0,d.jsx)(g.m,{}):t.items.length<=0?(0,d.jsx)(f.A,{title:"\u041f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):t?(0,d.jsx)(a.s,{onChangePage:e=>r((0,o.Tm)(e+1)),data:t.items,pages:t.totalPages,page:c}):null]})})})}}}]);
//# sourceMappingURL=225.b6376cdd.chunk.js.map