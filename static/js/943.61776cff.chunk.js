"use strict";(self.webpackChunkkoma_film_portal=self.webpackChunkkoma_film_portal||[]).push([[943],{346:(e,s,n)=>{n.d(s,{s:()=>x});var l=n(216),i=n(475),t=n(795);const a={item:"filmItem_item__rz2TU",link:"filmItem_link__MZKoo",block:"filmItem_block__2pmLQ",imgBlock:"filmItem_imgBlock__Vltyn",poster:"filmItem_poster__C6+K4",title:"filmItem_title__F1Xhv",logo:"filmItem_logo__erZw4",buttons:"filmItem_buttons__c6Ibz"};var r=n(462),o=n(972),c=n(354),u=n(689),m=n(43),d=n(593),g=n(579);const _=e=>{var s,n;let{data:_}=e;const v=(0,c.j)(),[h,k]=(0,m.useState)(!1),f=(0,c.G)((e=>e.users.currentUserId)),p=(0,c.G)((e=>e.users.usersList)),x=(0,l.Zp)(),j=(0,c.G)((e=>{if(null!==f){var s;const n=(0,d.R)(p,f);return null===(s=e.users.usersList[n])||void 0===s?void 0:s.likedFilmsId}}));return(0,m.useEffect)((()=>{j&&(j.includes(_.kinopoiskId)?k(!0):k(!1))}),[j]),(0,g.jsx)("li",{className:a.item,children:(0,g.jsxs)(i.N_,{className:a.link,to:"".concat(o.G.card,"/").concat(_.kinopoiskId),children:[(0,g.jsx)("div",{className:a.imgBlock,children:(0,g.jsx)("img",{className:a.poster,src:_.posterUrlPreview,alt:_.nameRu?_.nameRu:_.nameEn?_.nameEn:_.nameOriginal})}),(0,g.jsxs)("div",{className:a.block,children:[(0,g.jsx)("h2",{className:a.title,children:_.nameRu?_.nameRu:_.nameEn?_.nameEn:_.nameOriginal}),(0,g.jsxs)("p",{className:a.year,children:[_.nameEn?_.nameEn+",":""," ",_.year]}),(0,g.jsxs)("p",{className:a.rated,children:[null===(s=_.countries[0])||void 0===s?void 0:s.country," \u2022 ",null===(n=_.genres[0])||void 0===n?void 0:n.genre]})]}),(0,g.jsxs)("div",{className:a.buttons,children:[(0,g.jsx)(t.u,{className:a.btn,children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),h?(0,g.jsxs)(t.u,{className:a.btnLike,onClick:e=>{e.preventDefault(),e.stopPropagation(),v((0,u.G8)({id:_.kinopoiskId}))},active:!0,children:[(0,g.jsx)(r.FTR,{})," \u0414\u0438\u0437\u043b\u0430\u0439\u043a"]}):(0,g.jsxs)(t.u,{className:a.btnLike,onClick:e=>{e.preventDefault(),e.stopPropagation(),null!==f?v((0,u.vW)({film:_})):x(o.G.login)},children:[(0,g.jsx)(r.C1M,{})," \u041b\u0430\u0439\u043a"]})]})]})})},v={list:"filmsList_list__-1joh",pagination:"filmsList_pagination__YmDOS"};var h=n(339);const k="paginationBtn_paginatinBtn__YZR90",f="paginationBtn_active__qUqRN",p=e=>{let{index:s,active:n,onClick:l}=e;const[i,t]=(0,m.useState)("");return(0,m.useEffect)((()=>{t(n?f:"")}),[n]),(0,g.jsx)("button",{onClick:l,className:(0,h.A)(k,i),children:s})},x=e=>{let{data:s,pages:n,page:l,onChangePage:i}=e;return(0,g.jsxs)("div",{children:[(0,g.jsx)("ul",{className:v.list,children:s&&s.map((e=>(0,g.jsx)(_,{data:e},e.kinopoiskId)))}),n&&n>1&&(0,g.jsx)("ul",{className:v.pagination,children:n&&Array.from({length:n}).map(((e,s)=>{const n=s+1;return(0,g.jsx)("li",{className:v.paginationItem,children:(0,g.jsx)(p,{onClick:()=>i(s),index:n,active:n===l})},s)}))})]})}},86:(e,s,n)=>{n.d(s,{A:()=>a});n(43);const l={block:"messageBlock_block__fJS03",title:"messageBlock_title__+I7PB"};var i=n(339),t=n(579);function a(e){let{title:s,children:n}=e;return(0,t.jsxs)("div",{className:(0,i.A)(l.block,"container"),children:[(0,t.jsx)("h1",{className:l.title,children:s}),(0,t.jsx)("div",{children:n})]})}},943:(e,s,n)=>{n.r(s),n.d(s,{default:()=>m});var l=n(43),i=n(346),t=n(86),a=n(354),r=n(593),o=n(382);const c=(e,s)=>{let n=[];if(e){n=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const n=Math.ceil(e.length/Number(s)),l=[];let i=0,t=i+Number(s);for(let a=0;a<n;a++)t>Number(e.length)&&(t=Number(e.length)),l[a]=e.slice(i,t),i=t,t=i+Number(s);return l}(e.filter((e=>{if(s&&s.includes(e.kinopoiskId))return e})))}return n};var u=n(579);function m(){const e=(0,a.G)((e=>e.users.likedFilms)),s=(0,a.G)((e=>e.users.usersList)),n=(0,l.useContext)(o.N),m=(0,a.G)((e=>e.users.currentUserId)),d=(0,a.G)((e=>e.users.usersList)),[g,_]=(0,l.useState)([]);(0,l.useEffect)((()=>{if(null!==m&&void 0!==d){const e=(0,r.R)(s,m);_(d[e].likedFilmsId)}}),[d]),(0,l.useEffect)((()=>{const s=c(e,g).length,l=Number(s),i=Number(null===n||void 0===n?void 0:n.currentPage),t=null===n||void 0===n?void 0:n.changeCurrentPage,a=l>i;console.log(a),t&&!a&&t(l>1?l-1:i),console.log(i,l)}),[g]);const v=(0,l.useCallback)(c,[g]);return(0,u.jsx)("div",{children:(0,u.jsx)("div",{className:"container",children:null===m?(0,u.jsx)(t.A,{title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432\u0430\u0448 \u0441\u043f\u0438\u0441\u043e\u043a \u043b\u044e\u0431\u0438\u043c\u044b\u0445 \u0444\u0438\u043b\u044c\u043c\u043e\u0432"}):v(e,g).length<=0?(0,u.jsx)(t.A,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442"}):v(e,g)&&n?(0,u.jsx)(i.s,{pages:v(e,g).length,page:(null===n||void 0===n?void 0:n.currentPage)+1,onChangePage:null===n||void 0===n?void 0:n.changeCurrentPage,data:v(e,g)[null===n||void 0===n?void 0:n.currentPage]}):null})})}}}]);
//# sourceMappingURL=943.61776cff.chunk.js.map